components:
  schemas:
    ErrorResponse:
      type: object
      required:
        - message
        - error
      properties:
        message:
          type: string
          description: 'A message describing the error'
        error:
          type: string
          description: 'Error code (e.g. Not Found, Invalid Request, Unauthorized, etc.)'
    PaginationParams:
      type: object
      required:
        - limit
        - offset
      properties:
        limit:
          type: integer
          description: 'Number of items per page'
        offset:
          type: integer
          description: 'Number of items to skip'
    PaginatedResponse:
      type: object
      required:
        - results
        - total
        - limit
        - offset
      properties:
        results:
          type: array
          items:
            type: object
        total:
          type: integer
          description: 'Total number of items'
        limit:
          type: integer
          description: 'Number of items per page'
        offset:
          type: integer
          description: 'Number of items skipped'
        page:
          type: integer
          description: 'Current page number (1-indexed)'
        pages:
          type: integer
          description: 'Total number of pages'
    GetCommunities200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                      - id
                      - name
                      - description
                      - ownerAddress
                      - privacy
                      - visibility
                      - active
                      - membersCount
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      ownerAddress:
                        type: string
                      ownerName:
                        type: string
                        description: 'Display name of the community owner'
                      privacy:
                        type: string
                        enum: [public, private]
                      visibility:
                        type: string
                        enum: [all, unlisted]
                        description: 'Community visibility setting (all = listed, unlisted = hidden from general listings)'
                      active:
                        type: boolean
                      membersCount:
                        type: integer
                      thumbnails:
                        type: object
                        additionalProperties:
                          type: string
                        description: 'Map of thumbnail URLs by size/type'
                      friends:
                        type: array
                        items:
                          type: object
                          description: 'Friend profile information including address and name'
                        description: |
                          Array of friends who are members of this community.
                          This is only present when the user is signed in.
                      role:
                        type: string
                        enum: [owner, moderator, member, none]
                        description: |
                          The role of the user in the community.
                          This is only present when the user is signed in.
                      voiceChatStatus:
                        type: object
                        nullable: true
                        properties:
                          isActive:
                            type: boolean
                          participantCount:
                            type: integer
                          moderatorCount:
                            type: integer
                        description: 'Voice chat status for the community (null if no active voice chat)'
    CreateCommunity201OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - name
            - description
            - ownerAddress
            - privacy
            - visibility
            - active
          properties:
            id:
              type: string
            name:
              type: string
            description:
              type: string
            ownerAddress:
              type: string
            privacy:
              type: string
              enum: [public, private]
            visibility:
              type: string
              enum: [all, unlisted]
            active:
              type: boolean
            thumbnails:
              type: object
              additionalProperties:
                type: string
              description: 'A map of thumbnail types to URLs. The key is the thumbnail type (e.g. "raw") and the value is the URL.'
    UpdateCommunity200OkResponse:
      type: object
      required:
        - message
        - data
      properties:
        message:
          type: string
          description: 'A message describing the result'
        data:
          type: object
          required:
            - id
            - name
            - description
            - ownerAddress
            - privacy
            - visibility
            - active
          properties:
            id:
              type: string
            name:
              type: string
            description:
              type: string
            ownerAddress:
              type: string
            privacy:
              type: string
              enum: [public, private]
            visibility:
              type: string
              enum: [all, unlisted]
            active:
              type: boolean
            thumbnails:
              type: object
              additionalProperties:
                type: string
              description: 'A map of thumbnail types to URLs. The key is the thumbnail type (e.g. "raw") and the value is the URL.'
    GetCommunityById200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - name
            - description
            - ownerAddress
            - ownerName
            - privacy
            - visibility
            - active
            - membersCount
            - role
          properties:
            id:
              type: string
            name:
              type: string
            description:
              type: string
            ownerAddress:
              type: string
              description: 'ETH Address of the community owner'
            ownerName:
              type: string
              description: 'Display name of the community owner'
            privacy:
              type: string
              enum: [public, private]
            visibility:
              type: string
              enum: [all, unlisted]
            active:
              type: boolean
              description: 'Whether the community is active or it was logically deleted'
            membersCount:
              type: integer
              description: 'Number of members in the community'
            role:
              type: string
              enum: [owner, moderator, member, none]
              description: 'Role of the authenticated user in this community'
            thumbnails:
              type: object
              additionalProperties:
                type: string
              description: 'Map of thumbnail URLs by size/type'
            voiceChatStatus:
              type: object
              nullable: true
              properties:
                isActive:
                  type: boolean
                participantCount:
                  type: integer
                moderatorCount:
                  type: integer
              description: 'Voice chat status for the community (null if no active voice chat)'
    GetCommunityMembers200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                      - address
                      - role
                      - joinedAt
                      - name
                      - hasClaimedName
                      - profilePictureUrl
                      - friendshipStatus
                    properties:
                      address:
                        type: string
                        description: 'ETH Address of the member'
                      role:
                        type: string
                        enum: [owner, moderator, member]
                        description: 'Role of the member in the community'
                      joinedAt:
                        type: string
                        format: date-time
                        description: 'When the member joined the community'
                      name:
                        type: string
                        description: 'Display name of the member'
                      hasClaimedName:
                        type: boolean
                        description: 'Whether the member has claimed their name'
                      profilePictureUrl:
                        type: string
                        description: 'URL of the member profile picture'
                      friendshipStatus:
                        type: integer
                        description: 'Friendship status code between the authenticated user and the member'
    GetMemberCommunities200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                      - id
                      - name
                      - ownerAddress
                      - active
                      - role
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      ownerAddress:
                        type: string
                      active:
                        type: boolean
                      role:
                        type: string
                        enum: [owner, moderator, member]
                      thumbnails:
                        type: object
                        additionalProperties:
                          type: string
                        description: 'Map of thumbnail URLs by size/type'
    GetBannedMembers200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                      - address
                      - bannedAt
                    properties:
                      address:
                        type: string
                        description: 'ETH Address of the banned member'
                      bannedAt:
                        type: string
                        format: date-time
                        description: 'When the member was banned'
    CommunityPlace:
      type: object
      required:
        - id
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier of the place
    GetCommunityPlaces200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    $ref: '#/components/schemas/CommunityPlace'

    GetManagedCommunities200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                      - id
                      - name
                      - ownerAddress
                      - active
                      - role
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      ownerAddress:
                        type: string
                      active:
                        type: boolean
                      role:
                        type: string
                        enum: [owner, moderator]

    GetCommunitiesForModeration200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                      - id
                      - name
                      - description
                      - ownerAddress
                      - privacy
                      - visibility
                      - active
                      - membersCount
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                      ownerAddress:
                        type: string
                      privacy:
                        type: string
                        enum: [public, private]
                      visibility:
                        type: string
                        enum: [all, unlisted]
                      active:
                        type: boolean
                      membersCount:
                        type: integer
                      thumbnails:
                        type: object
                        additionalProperties:
                          type: string
                        description: 'Map of thumbnail URLs by size/type'

    GetReferralStats200OkResponse:
      type: object
      required:
        - invitedUsersAccepted
        - invitedUsersAcceptedViewed
        - rewardImages
      properties:
        invitedUsersAccepted:
          type: integer
          description: 'Current total number of users invited by the referral'
        invitedUsersAcceptedViewed:
          type: integer
          description: 'Total number of invited users recorded in the previous fetch'
        rewardImages:
          type: array
          description: 'Images url for each tier reached'
          items:
            type: object

    CreateCommunityRequest200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - id
            - communityId
            - memberAddress
            - type
            - status
          properties:
            id:
              type: string
              description: 'Unique identifier of the community request'
            communityId:
              type: string
              description: 'ID of the community'
            memberAddress:
              type: string
              description: 'ETH address of the member'
            type:
              type: string
              enum: [invite, request_to_join]
              description: 'Type of request'
            status:
              type: string
              enum: [pending, accepted, rejected, cancelled]
              description: 'Status of the request'

    GetActiveCommunityVoiceChats200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - activeChats
            - total
          properties:
            activeChats:
              type: array
              items:
                type: object
                required:
                  - communityId
                  - participantCount
                  - moderatorCount
                  - isMember
                  - communityName
                  - positions
                  - worlds
                properties:
                  communityId:
                    type: string
                    description: 'ID of the community'
                  participantCount:
                    type: integer
                    description: 'Number of participants in the voice chat'
                  moderatorCount:
                    type: integer
                    description: 'Number of moderators in the voice chat'
                  isMember:
                    type: boolean
                    description: 'Whether the user is a member of the community'
                  communityName:
                    type: string
                    description: 'Name of the community'
                  communityImage:
                    type: string
                    description: 'URL of the community image'
                  positions:
                    type: array
                    items:
                      type: string
                    description: 'Array of position coordinates'
                  worlds:
                    type: array
                    items:
                      type: string
                    description: 'Array of world identifiers'
            total:
              type: integer
              description: 'Total number of active voice chats'

    GetCommunityRequests200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                      - id
                      - communityId
                      - memberAddress
                      - type
                      - status
                      - name
                      - hasClaimedName
                      - profilePictureUrl
                      - friendshipStatus
                    properties:
                      id:
                        type: string
                        description: 'Unique identifier of the community request'
                      communityId:
                        type: string
                        description: 'ID of the community'
                      memberAddress:
                        type: string
                        description: 'ETH address of the member who made/received the request'
                      type:
                        type: string
                        enum: [invite, request_to_join]
                        description: 'Type of request'
                      status:
                        type: string
                        enum: [pending, accepted, rejected, cancelled]
                        description: 'Status of the request'
                      name:
                        type: string
                        description: 'Display name of the member'
                      hasClaimedName:
                        type: boolean
                        description: 'Whether the member has claimed their name'
                      profilePictureUrl:
                        type: string
                        description: 'URL of the member profile picture'
                      friendshipStatus:
                        type: integer
                        description: 'Friendship status code between the authenticated user and the member'

    GetMemberRequests200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          allOf:
            - $ref: '#/components/schemas/PaginatedResponse'
            - type: object
              properties:
                results:
                  type: array
                  items:
                    type: object
                    required:
                      - id
                      - communityId
                      - memberAddress
                      - type
                      - status
                      - name
                      - description
                      - ownerAddress
                      - ownerName
                      - privacy
                      - membersCount
                      - role
                      - active
                      - friends
                      - voiceChatStatus
                    properties:
                      id:
                        type: string
                        description: 'Unique identifier of the community request'
                      communityId:
                        type: string
                        description: 'ID of the community'
                      memberAddress:
                        type: string
                        description: 'ETH address of the member for whom the request was made'
                      type:
                        type: string
                        enum: [invite, request_to_join]
                        description: 'Type of request (invite received or join request sent)'
                      status:
                        type: string
                        enum: [pending, accepted, rejected, cancelled]
                        description: 'Status of the request'
                      name:
                        type: string
                        description: 'Name of the community'
                      description:
                        type: string
                        description: 'Description of the community'
                      ownerAddress:
                        type: string
                        description: 'ETH address of the community owner'
                      ownerName:
                        type: string
                        description: 'Display name of the community owner'
                      privacy:
                        type: string
                        enum: [public, private]
                        description: 'Privacy setting of the community'
                      membersCount:
                        type: integer
                        description: 'Total number of members in the community'
                      role:
                        type: string
                        enum: [none, Member, Moderator, Owner]
                        description: 'Current role of the user in this community'
                      active:
                        type: boolean
                        description: 'Whether the community is active'
                      friends:
                        type: array
                        items:
                          type: string
                        description: 'List of friends who are members of this community'
                      voiceChatStatus:
                        type: object
                        required:
                          - isActive
                          - participantCount
                          - moderatorCount
                        properties:
                          isActive:
                            type: boolean
                            description: 'Whether there is an active voice chat in the community'
                          participantCount:
                            type: integer
                            description: 'Number of participants in the voice chat'
                          moderatorCount:
                            type: integer
                            description: 'Number of moderators in the voice chat'
                        description: 'Voice chat status information for the community'

    UpdateCommunityRequestStatusRequest:
      type: object
      required:
        - intention
      properties:
        intention:
          type: string
          enum: [accepted, rejected, cancelled]
          description: 'Action to perform on the community request'

    GetCommunityInvites200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            type: object
            required:
              - id
              - name
            properties:
              id:
                type: string
                description: 'Unique identifier of the community'
              name:
                type: string
                description: 'Name of the community'
          description: 'List of communities where the inviter is a member but the invitee is not'

    CommunityPost:
      type: object
      required:
        - id
        - communityId
        - authorAddress
        - authorName
        - authorProfilePictureUrl
        - authorHasClaimedName
        - content
        - createdAt
        - likesCount
      properties:
        id:
          type: string
          format: uuid
          description: 'Unique post identifier'
        communityId:
          type: string
          format: uuid
          description: 'ID of the community this post belongs to'
        authorAddress:
          type: string
          description: 'Ethereum address of the post author'
        authorName:
          type: string
          description: 'Display name of the post author'
        authorProfilePictureUrl:
          type: string
          format: uri
          description: 'URL of the author profile picture'
        authorHasClaimedName:
          type: boolean
          description: 'Whether the author has a claimed name'
        content:
          type: string
          description: 'Post content (1-1000 characters)'
        createdAt:
          type: string
          format: date-time
          description: 'When the post was created'
        likesCount:
          type: integer
          description: 'Number of likes on this post'
        isLikedByUser:
          type: boolean
          description: 'Whether the authenticated user has liked this post (only present when user is authenticated)'

    CreatePostRequest:
      type: object
      required:
        - content
      properties:
        content:
          type: string
          minLength: 1
          maxLength: 1000
          description: 'Post content (1-1000 characters)'

    GetCommunityPosts200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - posts
            - total
          properties:
            posts:
              type: array
              items:
                $ref: '#/components/schemas/CommunityPost'
            total:
              type: integer
              description: 'Total number of posts in the community'

    CreatePost201OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: '#/components/schemas/CommunityPost'

    SearchCommunities200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - communities
          properties:
            communities:
              type: array
              items:
                type: object
                required:
                  - id
                  - name
                properties:
                  id:
                    type: string
                    format: uuid
                    description: 'Unique identifier of the community'
                  name:
                    type: string
                    description: 'Name of the community'
              description: 'List of communities matching the search query'

    GetMemberCommunitiesByIdsRequest:
      type: object
      required:
        - communityIds
      properties:
        communityIds:
          type: array
          items:
            type: string
            format: uuid
          minItems: 1
          maxItems: 50
          description: 'List of community IDs to validate (max 50)'

    GetMemberCommunitiesByIds200OkResponse:
      type: object
      required:
        - data
      properties:
        data:
          type: object
          required:
            - communities
          properties:
            communities:
              type: array
              items:
                type: object
                required:
                  - id
                properties:
                  id:
                    type: string
                    format: uuid
                    description: 'Unique identifier of a valid and visible community'
              description: 'List of communities that exist and are visible to the user'
